function editar_categoria(a){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=categorias&action=getCategoriaById&id_cat="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="id_cat"]').val(a.id_cat),$('[name="nombre"]').val(a.nombre),$('[name="descripcion"]').val(a.descripcion),$("#modal_form1").modal("show"),$(".modal-title").text("Editar categoria")},error:function(a,e,r){alert("Error get data from ajax")}})}function eliminarCategoria(a){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=categorias&action=delete",{id_cat:a},function(a){recargar()})}function guardar_categoria(){$.ajax({url:"?controller=categorias&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(a){alert("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(a,e,r){alert("Error")}})}function buscarCliente(){var a=$("#rif").val();$.ajax({url:"?controller=clientes&action=getClienteByRif",type:"GET",data:{rif:a},dataType:"json",success:function(a){swal(a.msj)}})}function eliminarCliente(a){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=clientes&action=delete",{id_cliente:a},function(a){recargar()})}function ver_cliente(a){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=clientes&action=searchClienteByid&id_cliente="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="rif"]').val(a.rif),$('[name="razon_social"]').val(a.razon_social),$('[name="telefono"]').val(a.telefono),$('[name="email"]').val(a.email),$('[name="direccion"]').val(a.direccion),$("#modal_form").modal("show"),$(".modal-title").text("Ver cliente")},error:function(a,e,r){alert("Error get data from ajax")}})}function editar_cliente(a){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=clientes&action=searchClienteByid&id_cliente="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="rif"]').val(a.rif),$('[name="razon_social"]').val(a.razon_social),$('[name="telefono"]').val(a.telefono),$('[name="email"]').val(a.email),$('[name="direccion"]').val(a.direccion),$('[name="id_cliente"]').val(a.id_cliente),$("#modal_form1").modal("show"),$(".modal-title").text("Editar cliente")},error:function(a,e,r){alert("Error get data from ajax")}})}function guardar_cliente(){$.ajax({url:"?controller=clientes&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(a){alert("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(a,e,r){alert("Error")}})}function buscar_proveedor(){var a=$("#rif-entrada").val();$.ajax({url:"?controller=compras&action=buscarProveedor&rif="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="rif-entrada"]').val(a.rif),$('[name="id_prov"]').val(a.id_prov),$('[name="razon_social"]').val(a.razon_social),$('[name="telefono"]').val(a.telefono),$('[name="direccion"]').val(a.direccion),$("#codigo").removeAttr("disabled"),$("#precio").removeAttr("disabled"),$("#cantidad").removeAttr("disabled"),1==a?($("#rif-entrada").focus(),alert("Debes introducir el Rif"),$("#codigo").attr("disabled","true")):0==a&&(alert("El proveedor no existe"),$("#codigo").attr("disabled","true"))},error:function(a,e,r){console.log("error")}})}function buscar_producto(){var a=$("#codigo").val();$.ajax({url:"?controller=compras&action=buscarProducto&codigo="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="codigo-entrada"]').val(a.codigo),$('[name="precio"]').val(a.precio),$('[name="descripcion"]').val(a.descripcion),$('[name="stock"]').val(a.stock),$('[name="stock_m"]').val(a.stock_minimo),1==a?($("#codigo").focus(),alert("Debes introducir el codigo")):0==a&&alert("El producto no existe")},error:function(a,e,r){console.log("error")}})}function agregar_carrito(){var a=$("#cantidad").val(),e=$("#codigo").val(),r=$("#precio").val();""!=e?""!=a?$.ajax({url:"?controller=compras&action=agregar",type:"GET",data:{codigo:e,cantidad:a,precio:r},dataType:"json",success:function(a){1==a.success?($("#codigo").val(""),$("#descripcion").val(""),$("#precio").val(""),$("#cantidad").val(""),$("#existencia").val(""),$("#minimo").val(""),$(".detalle-producto").load("views/compras/detalle.php")):alert(a.msj)},error:function(a,e,r){alert(r.msj)}}):(alert("Ingrese una cantidad"),$("#cantidad").focus()):(alert("Seleccione un producto"),$("#codigo").focus())}function eliminar_carrito(a){confirm("¿ Realmente desea eliminarlo de la lista?")&&$.ajax({url:"?controller=compras&action=eliminar",type:"post",data:{codigo:a},dataType:"json"}).done(function(a){1==a.success?$(".detalle-producto").load("views/compras/detalle.php"):alert(a.msj)})}function login(){var a=$("[name=username]")[0].value,e=$("[name=password]")[0].value;$.ajax({type:"POST",url:"?controller=login&action=login",data:{usuario:a,clave:e}}).done(function(a){1==a?location.replace("?controller=index"):(alert("Usuario o Password Incorrectos"),location.reload())})}function buscarProducto(){var a=$("#codigo").val();$.ajax({url:"?controller=productos&action=getByCod",type:"GET",data:{codigo:a},dataType:"json",success:function(a){swal(a.msj)}})}function crear_producto(){$(".form-group").removeClass("has-error"),""===$("#codigo_p").val()?$('[name="codigo"]').parent().addClass("has-error"):""===$("#descripcion_p").val()?$('[name="descripcion"]').parent().addClass("has-error"):""===$("#modelo_p").val()?$('[name="modelo"]').parent().addClass("has-error"):""===$("#p_compra").val()?$('[name="p_compra"]').parent().addClass("has-error"):""===$("#p_venta").val()?$('[name="p_venta"]').parent().addClass("has-error"):""===$("#stock").val()?$('[name="stock"]').parent().addClass("has-error"):""===$("#stock_min").val()?$('[name="stock_min"]').parent().addClass("has-error"):""===$("#procedencia").val()?$('[name="procedencia"]').parent().addClass("has-error"):""===$("#categoria").val()?$('[name="categoria"]').parent().addClass("has-error"):$.ajax({url:"?controller=productos&action=createforjson",type:"POST",data:$("#form2").serialize(),dataType:"JSON",success:function(a){swal(a.msj),$("#modal-prod").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()},error:function(a,e,r){swal(error),$("#modal-prod").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()}})}function buscarProv(){var a=$("#rif").val();$.ajax({url:"?controller=proveedores&action=getProvByRif",type:"GET",data:{rif:a},dataType:"json",success:function(a){swal(a.msj)}})}function eliminarProv(a){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=proveedores&action=delete",{id_prov:a},function(a){recargar()})}function ver_proveedor(a){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=proveedores&action=searchproveedorByid&id_prov="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="rif"]').val(a.rif),$('[name="razon_social"]').val(a.razon_social),$('[name="telefono"]').val(a.telefono),$('[name="email"]').val(a.email),$('[name="direccion"]').val(a.direccion),$("#modal_form").modal("show"),$(".modal-title").text("Ver proveedor")},error:function(a,e,r){swal("Error get data from ajax")}})}function editar_proveedor(a){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=proveedores&action=searchproveedorByid&id_prov="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="rif"]').val(a.rif),$('[name="razon_social"]').val(a.razon_social),$('[name="telefono"]').val(a.telefono),$('[name="email"]').val(a.email),$('[name="direccion"]').val(a.direccion),$('[name="id_prov"]').val(a.id_prov),$("#modal_form1").modal("show"),$(".modal-title").text("Editar proveedor")},error:function(a,e,r){swal("Error get data from ajax")}})}function guardar_proveedor(){$.ajax({url:"?controller=proveedores&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(a){swal("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(a,e,r){swal("Error")}})}function crear_proveedor(){$(".form-group").removeClass("has-error"),""===$("#rif").val()?$('[name="rif"]').parent().parent().addClass("has-error"):""===$("#razon_social").val()?$('[name="razon_social"]').parent().addClass("has-error"):""===$("#telefono").val()?$('[name="telefono"]').parent().addClass("has-error"):""===$("#email").val()?$('[name="email"]').parent().addClass("has-error"):""===$("#direccion").val()?$('[name="direccion"]').parent().addClass("has-error"):$.ajax({url:"?controller=proveedores&action=createforjson",type:"POST",data:$("#form").serialize(),dataType:"json",success:function(a){swal(a.msj),$("#modal-id").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()},error:function(a,e,r){swal(r),$("#modal-id").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()}})}function buscarUsuario(){var a=document.getElementById("cedula").value;$.get("?controller=usuarios&action=comprobar&cedula=",{cedula:a},function(a){$(".mensaje").html(a)})}function eliminarUsuario(a){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=usuarios&action=delete",{cedula:a},function(a){recargar()})}function ver_usuario(a){$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=usuarios&action=getUserByCedula&cedula="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="cedula"]').val(a.ci_emp),$('[name="nombre"]').val(a.primer_nombre),$('[name="apellido"]').val(a.primer_apellido),$('[name="username"]').val(a.username),$('[name="rol"]').val(a.rol),$("#modal_form").modal("show"),$(".modal-title").text("Ver usuario")},error:function(a,e,r){swal("Error get data from ajax")}})}function editar_usuario(a){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=usuarios&action=getUserByCedula&cedula="+a,type:"GET",dataType:"JSON",success:function(a){$('[name="cedula"]').val(a.ci_emp),$('[name="nombre"]').val(a.primer_nombre),$('[name="apellido"]').val(a.primer_apellido),$('[name="username"]').val(a.username),$("#rol").val(a.rol),$('[name="id_emp"]').val(a.id_emp),$("#modal_form1").modal("show"),$(".modal-title").text("Editar usuario")},error:function(a,e,r){swal("Error get data from ajax")}})}function guardar_usuario(){$.ajax({url:"?controller=usuarios&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(a){swal("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(a,e,r){swal("Error")}})}$(function(){$("#login").click(function(a){a.preventDefault(),login()})});