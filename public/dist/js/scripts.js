function editar_categoria(e){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=categorias&action=getCategoriaById&id_cat="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="id_cat"]').val(e.id_cat),$('[name="nombre"]').val(e.nombre),$('[name="descripcion"]').val(e.descripcion),$("#modal_form1").modal("show"),$(".modal-title").text("Editar categoria")},error:function(e,a,r){alert("Error get data from ajax")}})}function eliminarCategoria(e){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=categorias&action=delete",{id_cat:e},function(e){recargar()})}function guardar_categoria(){$.ajax({url:"?controller=categorias&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(e){alert("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(e,a,r){alert("Error")}})}function buscarCliente(){var e=document.getElementById("rif").value;$.get("?controller=clientes&action=getClienteByRif",{rif:e},function(e){$('[name="rif"]').parent().parent().addClass("has-error"),$("#mensaje").text(e)})}function eliminarCliente(e){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=clientes&action=delete",{id_cliente:e},function(e){recargar()})}function ver_cliente(e){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=clientes&action=searchClienteByid&id_cliente="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="rif"]').val(e.rif),$('[name="razon_social"]').val(e.razon_social),$('[name="telefono"]').val(e.telefono),$('[name="email"]').val(e.email),$('[name="direccion"]').val(e.direccion),$("#modal_form").modal("show"),$(".modal-title").text("Ver cliente")},error:function(e,a,r){alert("Error get data from ajax")}})}function editar_cliente(e){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=clientes&action=searchClienteByid&id_cliente="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="rif"]').val(e.rif),$('[name="razon_social"]').val(e.razon_social),$('[name="telefono"]').val(e.telefono),$('[name="email"]').val(e.email),$('[name="direccion"]').val(e.direccion),$('[name="id_cliente"]').val(e.id_cliente),$("#modal_form1").modal("show"),$(".modal-title").text("Editar cliente")},error:function(e,a,r){alert("Error get data from ajax")}})}function guardar_cliente(){$.ajax({url:"?controller=clientes&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(e){alert("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(e,a,r){alert("Error")}})}function buscar_proveedor(){var e=$("#rif-entrada").val();$.ajax({url:"?controller=compras&action=buscarProveedor&rif="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="rif-entrada"]').val(e.rif),$('[name="id_prov"]').val(e.id_prov),$('[name="razon_social"]').val(e.razon_social),$('[name="telefono"]').val(e.telefono),$('[name="direccion"]').val(e.direccion),$("#codigo").removeAttr("disabled"),$("#precio").removeAttr("disabled"),$("#cantidad").removeAttr("disabled"),1==e?($("#rif-entrada").focus(),alert("Debes introducir el Rif"),$("#codigo").attr("disabled","true")):0==e&&(alert("El proveedor no existe"),$("#codigo").attr("disabled","true"))},error:function(e,a,r){console.log("error")}})}function buscar_producto(){var e=$("#codigo").val();$.ajax({url:"?controller=compras&action=buscarProducto&codigo="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="codigo-entrada"]').val(e.codigo),$('[name="precio"]').val(e.precio),$('[name="descripcion"]').val(e.descripcion),$('[name="stock"]').val(e.stock),$('[name="stock_m"]').val(e.stock_minimo),1==e?($("#codigo").focus(),alert("Debes introducir el codigo")):0==e&&alert("El producto no existe")},error:function(e,a,r){console.log("error")}})}function agregar_carrito(){var e=$("#cantidad").val(),a=$("#codigo").val(),r=$("#precio").val();""!=a?""!=e?$.ajax({url:"?controller=compras&action=agregar",type:"GET",data:{codigo:a,cantidad:e,precio:r},dataType:"json",success:function(e){1==e.success?($("#codigo").val(""),$("#descripcion").val(""),$("#precio").val(""),$("#cantidad").val(""),$("#existencia").val(""),$("#minimo").val(""),$(".detalle-producto").load("views/compras/detalle.php")):alert(e.msj)},error:function(e,a,r){alert(r.msj)}}):(alert("Ingrese una cantidad"),$("#cantidad").focus()):(alert("Seleccione un producto"),$("#codigo").focus())}function eliminar_carrito(e){confirm("¿ Realmente desea eliminarlo de la lista?")&&$.ajax({url:"?controller=compras&action=eliminar",type:"post",data:{codigo:e},dataType:"json"}).done(function(e){1==e.success?$(".detalle-producto").load("views/compras/detalle.php"):alert(e.msj)})}function login(){var e=$("[name=username]")[0].value,a=$("[name=password]")[0].value;$.ajax({type:"POST",url:"?controller=login&action=login",data:{usuario:e,clave:a}}).done(function(e){1==e?location.replace("?controller=index"):(alert("Usuario o Password Incorrectos"),location.reload())})}function crear_producto(){$(".form-group").removeClass("has-error"),""===$("#codigo_p").val()?$('[name="codigo"]').parent().addClass("has-error"):""===$("#descripcion_p").val()?$('[name="descripcion"]').parent().addClass("has-error"):""===$("#modelo_p").val()?$('[name="modelo"]').parent().addClass("has-error"):""===$("#p_compra").val()?$('[name="p_compra"]').parent().addClass("has-error"):""===$("#p_venta").val()?$('[name="p_venta"]').parent().addClass("has-error"):""===$("#stock").val()?$('[name="stock"]').parent().addClass("has-error"):""===$("#stock_min").val()?$('[name="stock_min"]').parent().addClass("has-error"):""===$("#procedencia").val()?$('[name="procedencia"]').parent().addClass("has-error"):""===$("#categoria").val()?$('[name="categoria"]').parent().addClass("has-error"):$.ajax({url:"?controller=productos&action=createforjson",type:"POST",data:$("#form2").serialize(),dataType:"JSON",success:function(e){alert(e.msj),$("#modal-prod").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()},error:function(e,a,r){alert(error),$("#modal-prod").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()}})}function buscarProv(){var e=document.getElementById("rif").value;$.get("?controller=proveedores&action=getProveedorByRif",{rif:e},function(e){$('[name="rif"]').parent().parent().addClass("has-error"),$("#mensaje").text(e)})}function eliminarProv(e){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=proveedores&action=delete",{id_prov:e},function(e){recargar()})}function ver_proveedor(e){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=proveedores&action=searchproveedorByid&id_prov="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="rif"]').val(e.rif),$('[name="razon_social"]').val(e.razon_social),$('[name="telefono"]').val(e.telefono),$('[name="email"]').val(e.email),$('[name="direccion"]').val(e.direccion),$("#modal_form").modal("show"),$(".modal-title").text("Ver proveedor")},error:function(e,a,r){alert("Error get data from ajax")}})}function editar_proveedor(e){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=proveedores&action=searchproveedorByid&id_prov="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="rif"]').val(e.rif),$('[name="razon_social"]').val(e.razon_social),$('[name="telefono"]').val(e.telefono),$('[name="email"]').val(e.email),$('[name="direccion"]').val(e.direccion),$('[name="id_prov"]').val(e.id_prov),$("#modal_form1").modal("show"),$(".modal-title").text("Editar proveedor")},error:function(e,a,r){alert("Error get data from ajax")}})}function guardar_proveedor(){$.ajax({url:"?controller=proveedores&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(e){alert("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(e,a,r){alert("Error")}})}function crear_proveedor(){$(".form-group").removeClass("has-error"),""===$("#rif").val()?$('[name="rif"]').parent().parent().addClass("has-error"):""===$("#razon_social").val()?$('[name="razon_social"]').parent().addClass("has-error"):""===$("#telefono").val()?$('[name="telefono"]').parent().addClass("has-error"):""===$("#email").val()?$('[name="email"]').parent().addClass("has-error"):""===$("#direccion").val()?$('[name="direccion"]').parent().addClass("has-error"):$.ajax({url:"?controller=proveedores&action=createforjson",type:"POST",data:$("#form").serialize(),dataType:"json",success:function(e){alert(e.msj),$("#modal-id").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()},error:function(e,a,r){alert(r),$("#modal-id").modal("hide"),$(".form-group").removeClass("has-error"),$(".help-block").empty()}})}function buscarUsuario(){var e=document.getElementById("cedula").value;$.get("?controller=usuarios&action=comprobar&cedula=",{cedula:e},function(e){$(".mensaje").html(e)})}function eliminarUsuario(e){confirm("¿ Realmente desea eliminar este registro ?")&&$.get("?controller=usuarios&action=delete",{cedula:e},function(e){recargar()})}function ver_usuario(e){$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=usuarios&action=getUserByCedula&cedula="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="cedula"]').val(e.ci_emp),$('[name="nombre"]').val(e.primer_nombre),$('[name="apellido"]').val(e.primer_apellido),$('[name="username"]').val(e.username),$('[name="rol"]').val(e.rol),$("#modal_form").modal("show"),$(".modal-title").text("Ver usuario")},error:function(e,a,r){alert("Error get data from ajax")}})}function editar_usuario(e){save_method="update",$(".form-group").removeClass("has-error"),$(".help-block").empty(),$.ajax({url:"?controller=usuarios&action=getUserByCedula&cedula="+e,type:"GET",dataType:"JSON",success:function(e){$('[name="cedula"]').val(e.ci_emp),$('[name="nombre"]').val(e.primer_nombre),$('[name="apellido"]').val(e.primer_apellido),$('[name="username"]').val(e.username),$("#rol").val(e.rol),$('[name="id_emp"]').val(e.id_emp),$("#modal_form1").modal("show"),$(".modal-title").text("Editar usuario")},error:function(e,a,r){alert("Error get data from ajax")}})}function guardar_usuario(){$.ajax({url:"?controller=usuarios&action=update",type:"POST",data:$("#form").serialize(),dataType:"JSON",success:function(e){alert("ha sido actualizado"),$("#modal_form1").modal("hide"),recargar()},error:function(e,a,r){alert("Error")}})}$(function(){$("#login").click(function(e){e.preventDefault(),login()})});